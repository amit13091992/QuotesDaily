package com.amit.quotesdaily.activity;import android.annotation.SuppressLint;import android.content.Context;import android.content.Intent;import android.graphics.Typeface;import android.os.Build;import android.os.Bundle;import android.support.v4.content.ContextCompat;import android.support.v7.app.AppCompatActivity;import android.support.v7.widget.Toolbar;import android.util.Log;import android.view.Menu;import android.view.MenuItem;import android.view.Window;import android.view.WindowManager;import android.widget.TextView;import android.widget.Toast;import com.amit.quotesdaily.R;@SuppressWarnings("deprecation")public class SingleQuote extends AppCompatActivity {    private String quote;    private String quoteTitle;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_single_quote);        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);        setSupportActionBar(toolbar);        toolbar.setTitle(" ");        if (getSupportActionBar() != null) {            getSupportActionBar().setDisplayHomeAsUpEnabled(true);        }        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {            Window window = getWindow();            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);            window.setStatusBarColor(ContextCompat.getColor(getApplicationContext(), R.color.colorPrimaryDark));        }        getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);        Intent i = getIntent();        Bundle bundle = i.getExtras();        assert bundle != null;        quote = bundle.getString("quote");        quoteTitle = bundle.getString("quoteTitle");        Typeface custom_font = Typeface.createFromAsset(getAssets(), "fonts/PlayfairDisplayRegular.ttf");        TextView lblQuoteTitle = findViewById(R.id.apptext);        TextView lblQuote = findViewById(R.id.idTextQuote);        lblQuoteTitle.setTypeface(custom_font);        lblQuote.setTypeface(custom_font);        lblQuote.setText(quote);        lblQuoteTitle.setText(quoteTitle);    }    @Override    public void onBackPressed() {        super.onBackPressed();        finish();    }    @Override    public boolean onCreateOptionsMenu(Menu menu) {        // Inflate the menu; this adds items to the action bar if it is present.        getMenuInflater().inflate(R.menu.singlequote_menu, menu);        return true;    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        // Handle action bar item clicks here. The action bar will        // automatically handle clicks on the Home/Up button, so long        // as you specify a parent activity in AndroidManifest.xml.        switch (item.getItemId()) {            // Respond to the action bar's Up/Home button            case android.R.id.home:                finish();                return true;            case R.id.action_item_copy:                Toast.makeText(this, "Copied Quote to clipboard", Toast.LENGTH_SHORT).show();                setClipboard(getApplicationContext(), quote);                return true;            case R.id.action_item_share:                shareQuote(quote);                return true;        }        return super.onOptionsItemSelected(item);    }    @SuppressLint({"ObsoleteSdkInt", "LongLogTag"})    private void setClipboard(Context context, String text) {        if (android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.HONEYCOMB) {            android.text.ClipboardManager clipboard = (android.text.ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);            clipboard.setText(text);            Log.v("SingleQuote copied string < 11: ", text);        } else {            android.content.ClipboardManager clipboard = (android.content.ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);            android.content.ClipData clip =                    android.content.ClipData.newPlainText(getResources().getString(R.string.app_name),                            text);            clipboard.setPrimaryClip(clip);            Log.v("SingleQuote copied string > 11: ", clip.toString());        }    }    private void shareQuote(String quote) {        // Standard message to send        String msg = getResources().getString(R.string.app_name) + "\n" + quote;        Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);        sharingIntent.setType("text/plain");        sharingIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,                getResources().getString(R.string.app_name));        sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, msg);        startActivity(Intent.createChooser(sharingIntent, "Share Using ..."));        /**         * Share as email and other 3rd party apps code is below:         *///        Intent share = new Intent(Intent.ACTION_SEND);//        share.setType("text/plain");////        List<ResolveInfo> resInfo = getPackageManager().queryIntentActivities(share, 0);//        if (!resInfo.isEmpty()) {//            List<Intent> targetedShareIntents = new ArrayList<Intent>();//            Intent targetedShareIntent = null;////            for (ResolveInfo resolveInfo : resInfo) {//                String packageName = resolveInfo.activityInfo.packageName;//                targetedShareIntent = new Intent(android.content.Intent.ACTION_SEND);//                targetedShareIntent.setType("text/plain");////                // Find twitter: com.twitter.android...//                if ("com.twitter.android".equals(packageName)) {//                    targetedShareIntent.putExtra(android.content.Intent.EXTRA_TEXT, msg);//                } else if ("com.google.android.gm".equals(packageName)) {//                    targetedShareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, quote);//                    targetedShareIntent.putExtra(android.content.Intent.EXTRA_TEXT, Uri.encode(quote));//                } else if ("com.android.email".equals(packageName)) {//                    targetedShareIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, quote);//                    targetedShareIntent.putExtra(android.content.Intent.EXTRA_TEXT, Uri.encode(quote));//                } else {//                    // Rest of Apps//                    targetedShareIntent.putExtra(android.content.Intent.EXTRA_TEXT, msg);//                }////                targetedShareIntent.setPackage(packageName);//                targetedShareIntents.add(targetedShareIntent);//            }////            Intent chooserIntent = Intent.createChooser(targetedShareIntents.remove(0), "Share Using ...");//            chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, targetedShareIntents.toArray(new Parcelable[]{}));//            startActivityForResult(chooserIntent, 0);    }}